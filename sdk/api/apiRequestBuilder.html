
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>api-request-builder Â· commercetools node.js</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="getCredentials.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Read Me
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../">
            
                <a href="../">
            
                    
                    SDK
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../Middlewares.html">
            
                <a href="../Middlewares.html">
            
                    
                    Middlewares
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1.1" data-path="../Middlewares.html">
            
                <a href="../Middlewares.html#example">
            
                    
                    Example
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../upgrading-from-sphere-node-sdk.html">
            
                <a href="../upgrading-from-sphere-node-sdk.html">
            
                    
                    Upgrading from sphere-node-sdk
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../Testing.html">
            
                <a href="../Testing.html">
            
                    
                    Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.4" data-path="../Glossary.html">
            
                <a href="../Glossary.html">
            
                    
                    Glossary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5" data-path="./">
            
                <a href="./">
            
                    
                    API Reference
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1" data-path="./">
            
                <a href="./#core">
            
                    
                    core
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.1.1" data-path="sdkAuth.html">
            
                <a href="sdkAuth.html">
            
                    
                    sdk-auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.1.2" data-path="sdkClient.html">
            
                <a href="sdkClient.html">
            
                    
                    sdk-client
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.1.3" data-path="typescriptSdk.html">
            
                <a href="typescriptSdk.html">
            
                    
                    typescript
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5.2" data-path="./">
            
                <a href="./#middlewares">
            
                    
                    middlewares
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.5.2.1" data-path="sdkMiddlewareAuth.html">
            
                <a href="sdkMiddlewareAuth.html">
            
                    
                    sdk-middleware-auth
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2.2" data-path="sdkMiddlewareHttp.html">
            
                <a href="sdkMiddlewareHttp.html">
            
                    
                    sdk-middleware-http
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2.3" data-path="sdkMiddlewareQueue.html">
            
                <a href="sdkMiddlewareQueue.html">
            
                    
                    sdk-middleware-queue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2.4" data-path="sdkMiddlewareLogger.html">
            
                <a href="sdkMiddlewareLogger.html">
            
                    
                    sdk-middleware-logger
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2.5" data-path="sdkMiddlewareCorrelationId.html">
            
                <a href="sdkMiddlewareCorrelationId.html">
            
                    
                    sdk-middleware-correlation-id
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.2.6" data-path="sdkMiddlewareUserAgent.html">
            
                <a href="sdkMiddlewareUserAgent.html">
            
                    
                    sdk-middleware-user-agent
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.5.3" data-path="./">
            
                <a href="./#helpers">
            
                    
                    helpers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.2.5.3.1" data-path="apiRequestBuilder.html">
            
                <a href="apiRequestBuilder.html">
            
                    
                    api-request-builder
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3.2" data-path="getCredentials.html">
            
                <a href="getCredentials.html">
            
                    
                    get-credentials
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3.3" data-path="httpUserAgent.html">
            
                <a href="httpUserAgent.html">
            
                    
                    http-user-agent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.5.3.4" data-path="syncActions.html">
            
                <a href="syncActions.html">
            
                    
                    sync-actions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../../cli/">
            
                <a href="../../cli/">
            
                    
                    CLI
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../../cli/category-exporter.html">
            
                <a href="../../cli/category-exporter.html">
            
                    
                    Category Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../../cli/csv-parser-discount-code.html">
            
                <a href="../../cli/csv-parser-discount-code.html">
            
                    
                    CSV Discount Code Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../../cli/csv-parser-price.html">
            
                <a href="../../cli/csv-parser-price.html">
            
                    
                    CSV Price Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../../cli/csv-parser-orders.html">
            
                <a href="../../cli/csv-parser-orders.html">
            
                    
                    CSV Order Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../../cli/csv-parser-state.html">
            
                <a href="../../cli/csv-parser-state.html">
            
                    
                    CSV State Parser
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../../cli/custom-objects-exporter.html">
            
                <a href="../../cli/custom-objects-exporter.html">
            
                    
                    Custom Objects Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../../cli/custom-objects-importer.html">
            
                <a href="../../cli/custom-objects-importer.html">
            
                    
                    Custom Objects Importer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.8" data-path="../../cli/customer-groups-exporter.html">
            
                <a href="../../cli/customer-groups-exporter.html">
            
                    
                    Customer Groups Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.9" data-path="../../cli/personal-data-erasure.html">
            
                <a href="../../cli/personal-data-erasure.html">
            
                    
                    Personal Data Erasure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.10" data-path="../../cli/discount-code-generator.html">
            
                <a href="../../cli/discount-code-generator.html">
            
                    
                    Discount Code Generator
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.11" data-path="../../cli/discount-code-exporter.html">
            
                <a href="../../cli/discount-code-exporter.html">
            
                    
                    Discount Code Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.12" data-path="../../cli/discount-code-importer.html">
            
                <a href="../../cli/discount-code-importer.html">
            
                    
                    Discount Code Importer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.13" data-path="../../cli/inventories-exporter.html">
            
                <a href="../../cli/inventories-exporter.html">
            
                    
                    Inventories Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.14" data-path="../../cli/price-exporter.html">
            
                <a href="../../cli/price-exporter.html">
            
                    
                    Price Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.15" data-path="../../cli/product-exporter.html">
            
                <a href="../../cli/product-exporter.html">
            
                    
                    Product Exporter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.16" data-path="../../cli/product-json-to-csv.html">
            
                <a href="../../cli/product-json-to-csv.html">
            
                    
                    Product JSON to CSV
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.17" data-path="../../cli/product-json-to-xlsx.html">
            
                <a href="../../cli/product-json-to-xlsx.html">
            
                    
                    Product JSON to XLSX
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.18" data-path="../../cli/resource-deleter.html">
            
                <a href="../../cli/resource-deleter.html">
            
                    
                    Resource Deleter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.19" data-path="../../cli/state-importer.html">
            
                <a href="../../cli/state-importer.html">
            
                    
                    State importer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >api-request-builder</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="api-request-builder"><code>api-request-builder</code></h1>
<p>Provides an API to construct a URI for the HTTP API endpoints in a declarative way. Useful for building <a href="../Glossary.html#clientrequest">request</a> <code>uri</code> for requests.</p>
<h2 id="install">Install</h2>
<h4 id="nodejs">Node.js</h4>
<pre class="language-"><code class="lang-bash"><span class="token function">npm</span> <span class="token function">install</span> --save @commercetools/api-request-builder
</code></pre>
<h4 id="browser">Browser</h4>
<pre class="language-"><code class="lang-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://unpkg.com/@commercetools/api-request-builder/dist/commercetools-api-request-builder.umd.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
  // global: CommercetoolsApiRequestBuilder
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre>
<h2 id="createrequestbuilderoptions"><code>createRequestBuilder(options)</code></h2>
<p>Creates a <em>request builder</em> that allows to declaratively build a HTTP API request URI for the commercetools platform.</p>
<h4 id="arguments">Arguments</h4>
<p>The <code>options</code> argument must be an object with a <code>projectKey</code> property, and optionally a <code>customServices</code> property</p>
<pre class="language-"><code class="lang-js">    options <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> projectKey<span class="token punctuation">,</span> customServices <span class="token punctuation">}</span>
</code></pre>
<ol>
<li><code>projectKey</code> <em>(String)</em>: A required string specifying the project key to use for the request. Even though this is required, the project key can be omitted from the URI by passing <code>{withProjectKey: false}</code> to <code>.build()</code></li>
<li><code>customServices</code> <em>(Object)</em>: A map of custom services that are not provided by default. This might be useful to build a request for a different API with similar query parameters.</li>
</ol>
<p>A <em>service</em> is created by defining its <code>features</code>. Features give a service specific <em>characteristics</em> to correctly build URIs. For example, if a service can query a resource by ID you would include <code>queryOne</code>. Available features types are:</p>
<ul>
<li><code>query</code>: allows to use standard query capabilities (<code>page</code>, <code>perPage</code>, <code>sort</code>, <code>where</code>, <code>whereOperator</code>)</li>
<li><code>queryOne</code>: allows to query a single resource (<code>byId</code>, <code>byKey</code>, <code>byCustomerId</code>, <code>byCartId</code>)</li>
<li><code>queryLocation</code>: allows to query resources by location (<code>byCountry</code>, <code>byCurrency</code>, <code>byState</code>)</li>
<li><code>queryExpand</code>: allows to use reference expansion (<code>expand</code>)</li>
<li><code>search</code>: allows to use search capabilities (<code>text</code>, <code>fuzzy</code>, <code>fuzzyLevel</code>, <code>facet</code>, <code>markMatchingVariants</code>, <code>filter</code>, <code>filterByQuery</code>, <code>filterByFacets</code>)</li>
<li><code>projection</code>: allows to use projections capabilities (<code>staged</code>, <code>priceCurrency</code>, <code>priceCountry</code>, <code>priceCustomerGroup</code>, <code>priceChannel</code>)</li>
<li><code>suggest</code>: allows to use suggest capabilities (<code>searchKeywords</code>)</li>
</ul>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span>
  createRequestBuilder<span class="token punctuation">,</span>
  features<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;@commercetools/api-request-builder&apos;</span>
<span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
  projectKey<span class="token operator">:</span> <span class="token string">&apos;my-project&apos;</span><span class="token punctuation">,</span>
  customServices<span class="token operator">:</span> <span class="token punctuation">{</span>
    users<span class="token operator">:</span> <span class="token punctuation">{</span>
      type<span class="token operator">:</span> <span class="token string">&apos;users&apos;</span><span class="token punctuation">,</span>
      endpoint<span class="token operator">:</span> <span class="token string">&apos;/users&apos;</span><span class="token punctuation">,</span>
      features<span class="token operator">:</span> <span class="token punctuation">[</span>features<span class="token punctuation">.</span>query<span class="token punctuation">,</span> features<span class="token punctuation">.</span>queryOne<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> requestBuilder <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
</code></pre>
<h4 id="default-services">Default Services</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> requestBuilder <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> uri <span class="token operator">=</span> requestBuilder<span class="token punctuation">.</span>productProjections<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// uri = &quot;/project-key/product-projections&quot;</span>
</code></pre>
<p>Default services match the commercetools API using a camel-case convention.</p>
<table>
<thead>
<tr>
<th>Endpoints</th>
<th>Service</th>
<th>Features</th>
</tr>
</thead>
<tbody>
<tr>
<td>/login</td>
<td>login</td>
<td>create</td>
</tr>
<tr>
<td>/cart-discounts</td>
<td>cartDiscounts</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/carts</td>
<td>carts</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/categories</td>
<td>categories</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/channels</td>
<td>channels</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/customer-groups</td>
<td>customerGroups</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/customers</td>
<td>customers</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/customers/password</td>
<td>customersPassword</td>
<td>create</td>
</tr>
<tr>
<td>/customers/password-token</td>
<td>customersPasswordToken</td>
<td>create, queryOne</td>
</tr>
<tr>
<td>/customers/password/reset</td>
<td>customersPasswordReset</td>
<td>create</td>
</tr>
<tr>
<td>/customers/email-token</td>
<td>customersEmailVerificationToken</td>
<td>create, queryOne</td>
</tr>
<tr>
<td>/customers/email/confirm</td>
<td>customersEmailVerification</td>
<td>create</td>
</tr>
<tr>
<td>/custom-objects</td>
<td>customObjects</td>
<td>create, update, del, query, queryOne</td>
</tr>
<tr>
<td>/discount-codes</td>
<td>discountCodes</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/extensions</td>
<td>extensions</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/inventory</td>
<td>inventory</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/messages</td>
<td>messages</td>
<td>query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/me/active-cart</td>
<td>myActiveCart</td>
<td>queryOne</td>
</tr>
<tr>
<td>/me/carts</td>
<td>myCarts</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/me/orders</td>
<td>myOrders</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/orders</td>
<td>orders</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/orders/edits</td>
<td>orderEdits</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/orders/import</td>
<td>orderImport</td>
<td>create, query</td>
</tr>
<tr>
<td>/payments</td>
<td>payments</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/product-discounts</td>
<td>productDiscounts</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/product-projections</td>
<td>productProjections</td>
<td>query, queryOne, queryExpand, projection</td>
</tr>
<tr>
<td>/product-projections/search</td>
<td>productProjectionsSearch</td>
<td>search, queryOne, queryExpand, projection</td>
</tr>
<tr>
<td>/product-projections/suggest</td>
<td>productProjectionsSuggest</td>
<td>search, suggest, queryOne, projection</td>
</tr>
<tr>
<td>/products</td>
<td>products</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/product-types</td>
<td>productTypes</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/</td>
<td>project</td>
<td>update, query</td>
</tr>
<tr>
<td>/reviews</td>
<td>reviews</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/shipping-methods</td>
<td>shippingMethods</td>
<td>create, update, del, query, queryOne, queryExpand, queryLocation</td>
</tr>
<tr>
<td>/shopping-lists</td>
<td>shoppingLists</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/states</td>
<td>states</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/subscriptions</td>
<td>subscriptions</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/tax-categories</td>
<td>taxCategories</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/types</td>
<td>types</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
<tr>
<td>/zones</td>
<td>zones</td>
<td>create, update, del, query, queryOne, queryExpand</td>
</tr>
</tbody>
</table>
<p>Note that <code>markMatchingVariants</code> is set by default to <code>false</code> which turns off this feature on the API.</p>
<h4 id="staged">Staged</h4>
<p>It is possible to add the <code>staged</code> boolean option to the uri. This decides wether to query the <code>current</code> or <code>staged</code> projections, for example in <a href="https://docs.commercetools.com/http-api-projects-productProjections.html#product-projections" target="_blank">Product Projections</a>. (Defaults to <strong>false</strong>)</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> service <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> uri <span class="token operator">=</span> service<span class="token punctuation">.</span>productProjections<span class="token punctuation">.</span><span class="token function">staged</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="version">Version</h4>
<p>It is also possible to append the version of a resource to the uri when making a request that requires this (for example a <code>DELETE</code> request). This can be done by passing the required version to the <code>.withVersion()</code> method.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> service <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> uri <span class="token operator">=</span> service<span class="token punctuation">.</span>channels<span class="token punctuation">.</span><span class="token function">withVersion</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="queryone">QueryOne</h4>
<p>It is also possible to query for just one resource. QueryOne consists of <code>byId</code>, <code>byKey</code>, <code>byCustomerId</code>, <code>byCartId</code>.</p>
<p>When retrieving a resource using it&apos;s own ID, use <code>byId</code> or <code>byKey</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> requestBuilder <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> uri <span class="token operator">=</span> requestBuilder<span class="token punctuation">.</span>carts<span class="token punctuation">.</span><span class="token function">byId</span><span class="token punctuation">(</span><span class="token string">&apos;cartId&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p>When retrieving a resource by a customer or cart reference use <code>byCustomerId</code> or <code>byCartId</code>.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> requestBuilder <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> uri <span class="token operator">=</span> requestBuilder<span class="token punctuation">.</span>carts<span class="token punctuation">.</span><span class="token function">byCustomerId</span><span class="token punctuation">(</span><span class="token string">&apos;customerId&apos;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="dataerasure">dataErasure</h4>
<p>You can also append the <code>dataErasure</code> option to the uri when making a delete request if you want to make sure all related data is deleted. For example, regarding the GDPR, this means that all personal data related to the particular object, including invisible data, is erased. <a href="https://docs.commercetools.com/release-notes#releases-2018-05-24-data-erasure" target="_blank">More info here</a></p>
<p>This can be done by using the <code>.withFullDataErasure()</code> method.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> service <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> deleteUri <span class="token operator">=</span> service<span class="token punctuation">.</span>payments
  <span class="token punctuation">.</span><span class="token function">byId</span><span class="token punctuation">(</span><span class="token number">12345</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">withVersion</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">withFullDataErasure</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="withtotal">withTotal</h4>
<p>You can also append the <code>withTotal</code> option to the uri when making a query. <a href="https://docs.commercetools.com/http-api#pagedqueryresult" target="_blank">More info here</a>.</p>
<p>This can be done by using the <code>.withTotal(false)</code> method.</p>
<pre class="language-"><code class="lang-js"><span class="token keyword">const</span> service <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token keyword">const</span> getUri <span class="token operator">=</span> service<span class="token punctuation">.</span>orders<span class="token punctuation">.</span><span class="token function">withTotal</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="usage-example">Usage example</h4>
<pre class="language-"><code class="lang-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> createRequestBuilder <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;@commercetools/api-request-builder&apos;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&apos;@commercetools/sdk-client&apos;</span>

<span class="token keyword">const</span> requestBuilder <span class="token operator">=</span> <span class="token function">createRequestBuilder</span><span class="token punctuation">(</span><span class="token punctuation">{</span> projectKey<span class="token operator">:</span> <span class="token string">&apos;my-project-key&apos;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> client <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  middlewares<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> channelsUri <span class="token operator">=</span> requestBuilder<span class="token punctuation">.</span>channels
  <span class="token punctuation">.</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token string">&apos;key = &quot;foo&quot;&apos;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">perPage</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">withVersion</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> channelsRequest <span class="token operator">=</span> <span class="token punctuation">{</span>
  uri<span class="token operator">:</span> channelsUri<span class="token punctuation">,</span>
  method<span class="token operator">:</span> <span class="token string">&apos;GET&apos;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

client<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span>channelsRequest<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre>
<h4 id="declarative-usage">Declarative Usage</h4>
<p>A declarative API exists as an alternative to the imperative API (shown in the example above).</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// same imports and instantiation as above</span>
<span class="token keyword">const</span> channelsUri <span class="token operator">=</span> requestBuilder<span class="token punctuation">.</span>channels
  <span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    where<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&apos;key = &quot;foo&quot;&apos;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    perPage<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    version<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>
<p><strong>Type of Params</strong>
This declarative <code>parse</code> API accepts an object of the following shape:</p>
<pre class="language-"><code class="lang-js"><span class="token punctuation">{</span>
  <span class="token comment">// query-expand</span>
  expand<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token comment">// query-id</span>
  id<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
  key<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
  customerId<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
  cartId<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>

  <span class="token comment">// query-location</span>
  country<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
  currency<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>
  state<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span>string<span class="token punctuation">;</span>

  <span class="token comment">// query-page</span>
  sort<span class="token operator">:</span> Array<span class="token operator">&lt;</span><span class="token punctuation">{</span> by<span class="token operator">:</span> string<span class="token punctuation">,</span> direction<span class="token operator">:</span> <span class="token string">&apos;asc&apos;</span> <span class="token operator">|</span> <span class="token string">&apos;desc&apos;</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
  page<span class="token operator">:</span> <span class="token operator">?</span>number<span class="token punctuation">;</span>
  perPage<span class="token operator">:</span> <span class="token operator">?</span>number<span class="token punctuation">;</span>

  <span class="token comment">// query-projection</span>
  staged<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
  priceCurrency<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  priceCountry<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  priceCustomerGroup<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  priceChannel<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>

  <span class="token comment">// query-search</span>
  text<span class="token operator">?</span><span class="token operator">:</span> <span class="token operator">?</span><span class="token punctuation">{</span>
    language<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
    value<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  fuzzy<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
  fuzzyLevel<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
  markMatchingVariants<span class="token operator">?</span><span class="token operator">:</span> boolean<span class="token punctuation">;</span>
  facet<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  filter<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  filterByQuery<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  filterByFacets<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token comment">// query-suggest</span>
  searchKeywords<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span><span class="token punctuation">{</span>language<span class="token operator">:</span> string<span class="token punctuation">;</span> value<span class="token operator">:</span> string<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

  <span class="token comment">// query</span>
  where<span class="token operator">?</span><span class="token operator">:</span> Array<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">;</span>
  whereOperator<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">&apos;and&apos;</span> <span class="token operator">|</span> <span class="token string">&apos;or&apos;</span><span class="token punctuation">;</span>

  <span class="token comment">// version</span>
  version<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>

  <span class="token comment">// dataErasure</span>
  dataErasure<span class="token operator">?</span><span class="token operator">:</span> string<span class="token punctuation">;</span>

  <span class="token comment">// params</span>
  orderNumber<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><strong>Mixed usage</strong></p>
<p>The imperative API can be mixed with the declarative one.</p>
<pre class="language-"><code class="lang-js"><span class="token comment">// these both lead to the same result</span>
requestBuilder<span class="token punctuation">.</span>channels<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> page<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">perPage</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
requestBuilder<span class="token punctuation">.</span>channels<span class="token punctuation">.</span><span class="token function">perPage</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token punctuation">{</span> page<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./#helpers" class="navigation navigation-prev " aria-label="Previous page: helpers">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="getCredentials.html" class="navigation navigation-next " aria-label="Next page: get-credentials">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"api-request-builder","level":"1.2.5.3.1","depth":4,"next":{"title":"get-credentials","level":"1.2.5.3.2","depth":4,"path":"sdk/api/getCredentials.md","ref":"sdk/api/getCredentials.md","articles":[]},"previous":{"title":"helpers","level":"1.2.5.3","depth":3,"anchor":"#helpers","path":"sdk/api/README.md","ref":"sdk/api/README.md#helpers","articles":[{"title":"api-request-builder","level":"1.2.5.3.1","depth":4,"path":"sdk/api/apiRequestBuilder.md","ref":"sdk/api/apiRequestBuilder.md","articles":[]},{"title":"get-credentials","level":"1.2.5.3.2","depth":4,"path":"sdk/api/getCredentials.md","ref":"sdk/api/getCredentials.md","articles":[]},{"title":"http-user-agent","level":"1.2.5.3.3","depth":4,"path":"sdk/api/httpUserAgent.md","ref":"sdk/api/httpUserAgent.md","articles":[]},{"title":"sync-actions","level":"1.2.5.3.4","depth":4,"path":"sdk/api/syncActions.md","ref":"sdk/api/syncActions.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["edit-link","prism","-highlight","github","anchorjs","ga"],"root":"docs","styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{},"github":{"url":"https://github.com/commercetools/nodejs/"},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"ga":{"configuration":{"anonymizeIp":true},"token":"UA-38285631-20"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/commercetools/nodejs/tree/master"},"theme-default":{"styles":{"website":"build/gitbook.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"commercetools node.js","gitbook":">=3.2.1"},"file":{"path":"sdk/api/apiRequestBuilder.md","mtime":"2021-04-09T12:07:51.297Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-06-08T09:10:01.087Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

